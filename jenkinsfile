#!/usr/bin/env groov
pipeline {
    agent any
    tools { nodejs "node" }
    stages {
      stage("Teste"){
        steps {
          echo 'Teste stage'
        }
      }

       stage('NPM Install') {
        steps {
          script {
              sh 'cd /var/jenkins_home/workspace/mfe-dashboard'
              sh 'ls'
              // sh 'npm install'
          }
        }
      }

      // stage('Test') {
      //     withEnv(["CHROME_BIN=/usr/bin/chromium-browser"]) {
      //       sh 'ng test --progress=false --watch false'
      //     }
      //     junit '**/test-results.xml'
      // }

      // stage('Lint') {
      //     sh 'ng lint'
      // }

      // stage('Build') {
      //  script {
      //     sh 'ng build --prod --aot --sm --progress=false'
      //   }
      // }

      // stage('Archive') {
      //     sh 'tar -cvzf dist.tar.gz --strip-components=1 dist'
      //     archive 'dist.tar.gz'
      // }

      // stage('Deploy') {
      //     // milestone()
      //  steps {
      //     echo "Deploying..."
      //   }
      // }


    //   stage("Get Source") {
    //         steps {
    //             git url: 'https://github.com/xcarlosr/mfe-poc.git', branch: 'master'
    //         }
    //     }
    //     stage("Docker Build") {
    //         steps {
    //             script {
    //               dockerapp = docker.build("mfe/dashboard:${evn.BUILD_ID}"),
    //               "-f ./apps/dashboard/Dockerfile ."
    //             }
    //         }
    //     }
    //     stage("Docker push Image") {
    //         steps {
    //             docker.withRegistry('https://registry.hub.dokcer.com', 'dokcerhub'){
    //               dockerapp.push('latest')
    //               dokcerapp.push("${evn.BUILD_ID}")
    //             }
    //         }
    //     }
    }
}
